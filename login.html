<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>Roma&Knzy Intro â†’ Login</title>
<link rel="icon" type="image/png" href="1.png">
<link href="https://fonts.googleapis.com/css2?family=Tajawal:wght@400;700;800&display=swap" rel="stylesheet">
<style>
  :root{
    --accent1:#ff4b91; --accent2:#ff9ad8;
    --bgA: linear-gradient(180deg,#0b0710 10%, #1b0f2a 60%, #12081a 100%);
  }
  *{box-sizing:border-box;font-family:"Tajawal",sans-serif}
  html,body{height:100%;margin:0;background:var(--bgA);overflow:hidden;color:#fff}

  /* ============== INTRO OVERLAY ============== */
  .intro-overlay{
    position:fixed;inset:0;display:flex;align-items:center;justify-content:center;
    z-index:9999;background:radial-gradient(ellipse at center, rgba(255,75,145,0.04), transparent 25%), rgba(6,6,10,0.92);
    transition:opacity .8s ease,visibility .8s;
  }

  .insta-card{
    width:380px;max-width:94vw;border-radius:16px;padding:18px;background:linear-gradient(180deg, rgba(255,255,255,0.02), rgba(255,255,255,0.01));
    box-shadow:0 30px 80px rgba(0,0,0,0.6);backdrop-filter: blur(6px);position:relative;overflow:visible;
    transform-origin:center;animation:cardPop .9s cubic-bezier(.2,.9,.2,1) forwards;
  }
  @keyframes cardPop{from{transform:translateY(18px) scale(.98);opacity:0}to{transform:translateY(0) scale(1);opacity:1}}

  .insta-glow{position:absolute;inset:-12px;border-radius:18px;pointer-events:none;background:radial-gradient(circle at 30% 30%, rgba(255,75,145,0.06), transparent 14%), radial-gradient(circle at 70% 70%, rgba(163,225,255,0.03), transparent 14%);mix-blend-mode:screen;opacity:0}

  .insta-header{display:flex;gap:14px;align-items:center}
  .avatar{width:72px;height:72px;border-radius:50%;overflow:hidden;border:3px solid rgba(255,255,255,0.04);box-shadow:0 8px 30px rgba(0,0,0,0.6)}
  .avatar img{width:100%;height:100%;object-fit:cover;display:block}

  .meta{flex:1}
  .name{font-weight:900;font-size:1.05rem;color:#fff;display:flex;align-items:center;gap:8px}
  .verified{font-size:.72rem;padding:.12rem .5rem;border-radius:999px;background:linear-gradient(90deg,var(--accent1),var(--accent2));color:#fff;font-weight:800}
  .sub{color:rgba(255,255,255,0.72);font-size:.92rem;margin-top:6px}

  .f-row{margin-top:16px;display:flex;align-items:center;justify-content:space-between;gap:14px}
  .followers-box{background:linear-gradient(180deg, rgba(255,255,255,0.02), rgba(255,255,255,0.01));padding:12px;border-radius:12px;flex:1;display:flex;align-items:center;justify-content:space-between;gap:12px;border:1px solid rgba(255,255,255,0.02)}
  .count-left{display:flex;flex-direction:column}
  .count-num{font-weight:900;font-size:1.6rem;color:#fff;text-shadow:0 14px 32px rgba(0,0,0,0.6)}
  .count-label{font-size:.9rem;color:rgba(255,255,255,0.68)}

  .follow-btn{min-width:110px;padding:10px 16px;border-radius:999px;border:none;background:linear-gradient(90deg,var(--accent1),var(--accent2));color:#fff;font-weight:900;cursor:pointer;box-shadow:0 14px 40px rgba(255,75,145,0.12);transform-origin:center;outline:none}
  .follow-pressed{transform:scale(.95);filter:brightness(.98);}

  /* particles */
  .particle{position:fixed;pointer-events:none;font-size:18px;will-change:transform,opacity;z-index:9999;text-shadow:0 8px 18px rgba(0,0,0,0.4)}

  /* finish glow */
  .finish-flash{
    position:fixed;inset:0;background:radial-gradient(circle at 50% 40%, rgba(255,255,255,0.14), transparent 20%);opacity:0;pointer-events:none;z-index:9998;
  }

  .intro-hidden{opacity:0;visibility:hidden;pointer-events:none}

  /* ============== MAIN LOGIN (hidden until intro done) ============== */
  .main-wrap{min-height:100vh;display:flex;align-items:center;justify-content:center;padding:30px;transition:opacity .9s ease;opacity:0;visibility:hidden}
  .card{background:rgba(255,255,255,0.96);border-radius:16px;padding:30px;text-align:center;width:360px;box-shadow:0 20px 50px rgba(6,6,10,0.12);color:#111}
  .card .logo{width:88px;height:88px;border-radius:50%;overflow:hidden;margin:0 auto 16px;box-shadow:0 12px 30px rgba(0,0,0,0.06)}
  .card .logo img{width:100%;height:100%;object-fit:cover}
  .card h2{margin:0;font-size:1.3rem;color:#111}
  .hint{color:rgba(0,0,0,0.55);margin-top:6px}
  .field{margin-top:14px}
  input{width:100%;padding:12px;border-radius:10px;border:1px solid rgba(6,6,10,0.04);outline:none;background:#fff;font-size:14px}
  .btn{margin-top:14px;width:100%;padding:12px;border-radius:10px;border:none;background:linear-gradient(90deg,var(--accent1),var(--accent2));color:#fff;font-weight:800;cursor:pointer}
  .tiny{font-size:.86rem;color:rgba(0,0,0,0.45);margin-top:10px}

  @media (max-width:420px){
    .insta-card{width:92vw}
    .avatar{width:60px;height:60px}
    .count-num{font-size:1.2rem}
    .card{width:92vw;padding:18px}
  }
</style>
</head>
<body>

  <!-- INTRO OVERLAY -->
  <div class="intro-overlay" id="introOverlay" aria-hidden="false">
    <div class="insta-card" id="instaCard" role="region" aria-label="Ø­Ø³Ø§Ø¨ Roma&Knzy">
      <div class="insta-glow" id="instaGlow"></div>

      <div class="insta-header">
        <div class="avatar"><img src="1.png" alt="Roma&Knzy Logo"></div>
        <div class="meta">
          <div class="name">Roma&Knzy <span class="verified">Verified</span></div>
          <div class="sub">Ø­Ø³Ø§Ø¨ Ø±Ø³Ù…ÙŠ â€” Ø²ÙŠØ§Ø¯Ø© Ø§Ù„Ù…ØªØ§Ø¨Ø¹ÙŠÙ†</div>
        </div>
      </div>

      <div class="f-row">
        <div class="followers-box" aria-hidden="true">
          <div class="count-left">
            <div class="count-num" id="fcount">1,243</div>
            <div class="count-label">Ù…ØªØ§Ø¨Ø¹</div>
          </div>
          <div style="display:flex;align-items:center">
            <button class="follow-btn" id="followBtn" aria-hidden="true">Follow</button>
          </div>
        </div>
      </div>
    </div>
  </div>

  <div class="finish-flash" id="finishFlash" aria-hidden="true"></div>

  <!-- particles root (no initial DOM children) -->
  <div id="particlesRoot" aria-hidden="true"></div>

  <!-- MAIN LOGIN (hidden until intro done) -->
  <main class="main-wrap" id="mainWrap" aria-hidden="true">
    <div class="card" role="main" aria-label="Ù†Ù…ÙˆØ°Ø¬ ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„">
      <div class="logo"><img src="1.png" alt="Roma&Knzy Logo"></div>
      <h2>ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„</h2>
      <div class="hint">Ø£Ø¯Ø®Ù„ Ø¨ÙŠØ§Ù†Ø§ØªÙƒ Ù„Ù„Ø¯Ø®ÙˆÙ„ Ù„Ø­Ø³Ø§Ø¨Ùƒ</div>

      <div class="field"><input type="email" id="email" placeholder="example@mail.com"></div>
      <div class="field"><input type="password" id="password" placeholder="â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢"></div>
      <button class="btn" onclick="login()">ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„</button>
      <div class="tiny">Ù…Ø§ Ø¹Ù†Ø¯ÙƒØ´ Ø­Ø³Ø§Ø¨ØŸ <a href="signup.html" style="color:var(--accent1);font-weight:800">Ø¥Ù†Ø´Ø§Ø¡ Ø­Ø³Ø§Ø¨</a></div>
    </div>
  </main>

<script type="module">
  import { initializeApp } from "https://www.gstatic.com/firebasejs/11.0.1/firebase-app.js";
  import { getAuth, signInWithEmailAndPassword } from "https://www.gstatic.com/firebasejs/11.0.1/firebase-auth.js";

  const firebaseConfig = {
    apiKey: "AIzaSyA-Pi_g3EUeSgOeVii_OqodpDguMMyPknY",
    authDomain: "romalshop.firebaseapp.com",
    projectId: "romalshop",
    storageBucket: "romalshop.firebasestorage.app",
    messagingSenderId: "830369715807",
    appId: "1:830369715807:web:fbfde9ded9daac6eb46dea"
  };

  const app = initializeApp(firebaseConfig);
  const auth = getAuth(app);

  /* --------- Intro sequence settings --------- */
  const startCount = 1243;
  const targetCount = 10000;
  const countEl = document.getElementById('fcount');
  const followBtn = document.getElementById('followBtn');
  const introOverlay = document.getElementById('introOverlay');
  const mainWrap = document.getElementById('mainWrap');
  const particlesRoot = document.getElementById('particlesRoot');
  const instaGlow = document.getElementById('instaGlow');
  const finishFlash = document.getElementById('finishFlash');

  // format number with commas
  function fmt(n){ return n.toString().replace(/\B(?=(\d{3})+(?!\d))/g, ","); }

  // easing easeOutCubic
  function easeOutCubic(t){ return 1 - Math.pow(1 - t, 3); }

  // spawn particle icon near x,y
  function spawnParticle(x,y){
    const icons = ['â¤ï¸','â­','ğŸ‘¥','ğŸ”¥','ğŸ’–'];
    const el = document.createElement('div');
    el.className = 'particle';
    el.textContent = icons[Math.floor(Math.random()*icons.length)];
    document.body.appendChild(el);
    const size = 12 + Math.random()*20;
    el.style.fontSize = size + 'px';
    el.style.left = (x + (Math.random()*120 - 60)) + 'px';
    el.style.top = (y + (Math.random()*40 - 20)) + 'px';
    el.style.opacity = '1';
    const dx = (Math.random()*260 - 130);
    const dy = - (160 + Math.random()*420);
    const rot = (Math.random()*80 - 40);
    const dur = 1000 + Math.random()*1200;
    el.animate([
      { transform: 'translate(0,0) rotate(0deg) scale(1)', opacity:1 },
      { transform: `translate(${dx}px, ${dy}px) rotate(${rot}deg) scale(.7)`, opacity:0 }
    ], { duration: dur, easing: 'cubic-bezier(.22,.9,.3,1)', fill:'forwards' });
    setTimeout(()=> el.remove(), dur + 80);
  }

  // animate count
  function animateCount(start, end, duration, onUpdate, onComplete){
    const t0 = performance.now();
    function frame(now){
      const elapsed = now - t0;
      const t = Math.min(1, elapsed / duration);
      const eased = easeOutCubic(t);
      const current = Math.floor(start + (end - start) * eased);
      onUpdate(current);
      if (elapsed < duration) requestAnimationFrame(frame);
      else { onUpdate(end); if(onComplete) onComplete(); }
    }
    requestAnimationFrame(frame);
  }

  // run the intro sequence
  function runIntro(){
    // small cinematic delay
    setTimeout(()=> {
      // simulate follow press
      followBtn.classList.add('follow-pressed');
      // optional click sound (uncomment to enable)
      // const s = new Audio('https://actions.google.com/sounds/v1/buttons/button_roblox_click.ogg'); s.volume=0.18; s.play();

      const rect = document.getElementById('instaCard').getBoundingClientRect();
      const cx = rect.left + rect.width/2;
      const cy = rect.top + rect.height/2;
      // spawn initial burst
      for(let i=0;i<12;i++) spawnParticle(cx,cy);
      // tiny glow pulse
      instaGlow.animate([{opacity:0},{opacity:1},{opacity:0}],{duration:900,easing:'ease-out'});
    }, 600);

    // start the follower count after press
    setTimeout(()=> {
      animateCount(startCount, targetCount, 3400, (val)=>{
        countEl.textContent = fmt(val);
        // spawn some particles during progress
        const rect2 = document.getElementById('instaCard').getBoundingClientRect();
        const cx2 = rect2.left + rect2.width/2;
        const cy2 = rect2.top + rect2.height/2;
        if (Math.random() < 0.6) spawnParticle(cx2, cy2);
      }, ()=> {
        // finish burst, flash and reveal login
        const rect3 = document.getElementById('instaCard').getBoundingClientRect();
        const cx3 = rect3.left + rect3.width/2;
        const cy3 = rect3.top + rect3.height/2;
        for(let i=0;i<28;i++) spawnParticle(cx3,cy3);
        // finish flash
        finishFlash.animate([{opacity:0},{opacity:1},{opacity:0}],{duration:700,easing:'ease-out',fill:'forwards'});
        // add small glow to card
        instaGlow.animate([{opacity:0},{opacity:1},{opacity:0}],{duration:900,easing:'ease-out'});
        // reveal login after short pause
        setTimeout(()=> {
          introOverlay.classList.add('intro-hidden');
          mainWrap.style.opacity = '1'; mainWrap.style.visibility = 'visible'; mainWrap.setAttribute('aria-hidden','false');
          introOverlay.setAttribute('aria-hidden','true');
          // focus email
          setTimeout(()=>{ const e = document.getElementById('email'); if(e) e.focus(); }, 300);
        }, 700);
      });
    }, 950);
  }

  // safety fallback: ensure reveal if anything hangs
  window.addEventListener('load', ()=> {
    setTimeout(runIntro, 420);
    setTimeout(()=> {
      if (!mainWrap.style.visibility || mainWrap.style.visibility === 'hidden'){
        introOverlay.classList.add('intro-hidden');
        mainWrap.style.opacity = '1'; mainWrap.style.visibility = 'visible';
      }
    }, 11000);
  });

  /* ---------- Firebase Auth handler (existing) ---------- */
  window.login = function(){
    const email = document.getElementById("email").value;
    const password = document.getElementById("password").value;
    if(!email || !password){ alert('Ù…Ù† ÙØ¶Ù„Ùƒ Ø§Ù…Ù„Ø£ Ø§Ù„Ø­Ù‚ÙˆÙ„'); return; }

    signInWithEmailAndPassword(auth, email, password)
      .then(()=> {
        localStorage.setItem("loggedIn","true");
        window.location.href = "index.html";
      })
      .catch((err)=> {
        alert("Ø®Ø·Ø£ ÙÙŠ ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„: " + err.message);
      });
  };
</script>
</body>
</html>
